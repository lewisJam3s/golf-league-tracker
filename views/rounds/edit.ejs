<%- include('../partials/header') %>
<%- include('../partials/navbar') %>

<div class="page-container">

  <h1 class="mb-4">Edit Round</h1>

  <form 
    action="/rounds/<%= round._id %>?_method=PUT" 
    method="POST" 
    class="form-narrow"
  >

    <!-- Player -->
    <div class="mb-3">
      <label class="form-label fw-semibold">Player</label>
      <select name="player" class="form-control" required>
        <% players.forEach(p => { %>
          <option 
            value="<%= p._id %>" 
            <%= p._id.toString() === round.player.toString() ? "selected" : "" %>
          >
            <%= p.name %>
          </option>
        <% }); %>
      </select>
    </div>

    <!-- Date -->
    <div class="mb-3">
      <label class="form-label fw-semibold">Date</label>
      <input 
        type="date" 
        name="date" 
        class="form-control"
        value="<%= round.date.toISOString().split('T')[0] %>"
        required>
    </div>

    <!-- Course -->
    <div class="mb-3">
      <label class="form-label fw-semibold">Course</label>
      <input 
        type="text" 
        name="course" 
        class="form-control"
        value="<%= round.course %>"
        required>
    </div>

    <!-- Score -->
    <div class="mb-3">
      <label class="form-label fw-semibold">Score</label>
      <input 
        type="number" 
        name="score" 
        class="form-control"
        value="<%= round.score %>"
        required>
    </div>

    <!-- Notes -->
    <div class="mb-3">
      <label class="form-label fw-semibold">Notes (optional)</label>
      <textarea name="notes" class="form-control"><%= round.notes %></textarea>
    </div>

    <!-- Holes -->
    <div class="mb-3">
      <label class="form-label fw-semibold">Holes Played</label>
      <select name="holes" class="form-control" required>
        <option value="18" <%= round.holes === 18 ? "selected" : "" %>>18 Holes</option>
        <option value="9" <%= round.holes === 9 ? "selected" : "" %>>9 Holes</option>
      </select>
    </div>

    <!-- Par -->
    <div class="mb-4">
      <label class="form-label fw-semibold">Course Par</label>
      <input 
        type="number" 
        name="par" 
        class="form-control"
        value="<%= round.par %>"
        required>
    </div>

    <button class="btn btn-success me-2">Save Changes</button>
    <a href="/players/<%= round.player %>" class="btn btn-secondary">Cancel</a>

  </form>

</div>

<%- include('../partials/footer') %>

